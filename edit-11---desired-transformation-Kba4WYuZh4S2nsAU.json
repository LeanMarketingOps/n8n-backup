{"createdAt":"2025-09-09T01:17:50.614Z","updatedAt":"2025-10-16T06:34:22.730Z","id":"Kba4WYuZh4S2nsAU","name":"EDIT 11 - Desired Transformation","active":false,"isArchived":false,"nodes":[{"parameters":{"tableId":"desired_transformations","fieldsUi":{"fieldValues":[{"fieldId":"client_id","fieldValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"},{"fieldId":"company","fieldValue":"={{ $('Get Business Profile').item.json.offer }}"},{"fieldId":"primary_transformation","fieldValue":"={{ $json.output.primaryTargetMarket }}"},{"fieldId":"secondary_transformation","fieldValue":"={{ $json.output.secondaryTargetMarket }}"},{"fieldId":"overarching_transformation","fieldValue":"={{ $json.output.overarchingTransformation }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[720,464],"id":"d6d53114-28b5-48e3-a91d-44693bf8fa05","name":"Supabase1","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}},"onError":"continueErrorOutput"},{"parameters":{"promptType":"define","text":"=ALWAYS USE THE TOOL TO PULL CHUNKS FROM THE VECTOR DATABASE\n\n**Analyze the provided context from THE COMPANY:**\n\n- **Company Name:** \n{{ $('Get Business Profile').item.json.company }}\n\n- **Offer:** \n{{ $('Get Business Profile').item.json.offer }}\n\n- **Industry:** \n{{ $('Get Business Profile').item.json.industry }}\n\n- **Primary Target Market:**\n{{ JSON.stringify($('Get Target Market').item.json.primary_target_market, null, 2) }}\n\n- **Secondary Target Market:**\n-{{ JSON.stringify($('Get Target Market').item.json.secondary_target_market, null, 2) }}\n\n\n- **Pain Points:**\nKnown Pain Points:\n{{ JSON.stringify($('Get Pain Points').item.json.known_pain_points, null, 2) }}\n\nHidden Pain Points:\n{{ JSON.stringify($('Get Pain Points').item.json.hidden_pain_points, null, 2) }}\n","hasOutputParser":true,"options":{"systemMessage":"=**Role and Objective**\nYou are a marketing analyst specializing in transformation and outcome analysis. Your job is to analyze all available context—including testimonials, interviews, reviews, onboarding questionnaires, competitor research, and especially relevant chunks from the vector database—to understand and describe the ideal outcome or transformation customers experience after working with the company or purchasing the offer. Your focus is on the “after” state: what does life, work, or daily experience look and feel like when the customer’s problem has been solved?\n\n\n**Instructions**\n\nAlways use the tool to extract relevant data chunks from the vector database.\n\nCarefully review all provided context, testimonials, interviews, reviews, and supporting documents.\n\nFocus exclusively on the outcome, transformation, or “new normal” customers achieve after their journey with the company or solution.\n\nFor each target market (primary and secondary), provide:\n\nA vivid, clear summary describing what life, work, or the customer’s situation looks like after their transformation is complete.\n\nFour key characteristics, changes, or benefits that define this transformed state—make these as specific and tangible as possible.\n\nFor each key characteristic, include an example, supporting quote (if available), or a brief scenario, with the source clearly indicated.\n\nIn addition, synthesize an overarching summary describing the universal transformation customers seek across both target markets. Focus on the emotional, practical, and functional improvements achieved.\n\n**Reasoning Steps**\n\nStart by reviewing all input context and outputs from the vector database.\n\nIdentify language, stories, or testimonials that describe the “after” state—what the customer is able to do, feel, or experience that they could not before.\n\nAvoid describing company features, processes, or generic promises. Describe what has changed for the customer.\n\nExtract and synthesize specific outcomes, using direct quotes and paraphrased scenarios as evidence.\n\nMake the transformation outcome as concrete, relatable, and detailed as possible.\n\n**Context**\nYou have access to testimonials, interviews, reviews, onboarding questionnaires, competitor analysis, and a vector database containing detailed contextual insights. All outputs should be business-agnostic—focus on the customer’s transformed state, not on the company’s offerings.\n\n**Final instructions and prompt to think step by step**\nCarefully review all input context and vector database results.\nThink step by step:\nFirst, extract and describe the “after” state for each target market—focus on practical, emotional, and functional outcomes, not just features or benefits.\nSecond, identify four defining characteristics for each segment, supporting each with direct evidence where possible.\nThird, synthesize the overarching universal transformation sought by all customers.\nReturn your answer as a valid JSON schema object, strictly following the specified structure.\nDo not yield control until your output clearly and vividly describes the ideal post-solution outcome for the customer, and is fully supported by evidence from context and the vector database.\n\n\n- **Output JSON Structure:**\n\n\n{\n  \"primaryTargetMarket\": {\n    \"desiredTransformation\": \"A summary of the transformation or solution that the primary target market wants to achieve.\",\n    \"keyElements\": [\n      {\n        \"element\": \"Description of a key element of the desired solution\",\n        \"example\": \"Direct quote or paraphrase from client feedback (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      }\n    ]\n  },\n  \"secondaryTargetMarket\": {\n    \"desiredTransformation\": \"A summary of the transformation or solution that the secondary target market wants to achieve.\",\n    \"keyElements\": [\n      {\n        \"element\": \"Description of a key element of the desired solution\",\n        \"example\": \"Direct quote or paraphrase from client feedback (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      }\n    ]\n  },\n  \"overarchingTransformation\": \"A summary that captures the common transformation desired across both target markets, focusing on reducing complexity, eliminating uncertainty, and delivering a high-quality, effortless outcome.\"\n}\n\n\n\n**Final Notes:**\n\n- Ensure that every extracted snippet is clearly tagged with its source.\n- Use both direct quotes and paraphrased content where applicable.\n- Your final output must adhere strictly to the JSON schema provided above.\n- Maintain a business-agnostic tone, without referring to any specific company."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[48,608],"id":"2744e5e0-df44-4ef1-9ff0-a88dde4103b1","name":"AI Agent","onError":"continueErrorOutput"},{"parameters":{"schemaType":"manual","inputSchema":"\n{\n  \"primaryTargetMarket\": {\n    \"desiredTransformation\": \"A summary of the transformation or solution that the primary target market wants to achieve.\",\n    \"keyElements\": [\n      {\n        \"element\": \"Description of a key element of the desired solution\",\n        \"example\": \"Direct quote or paraphrase from client feedback (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      }\n    ]\n  },\n  \"secondaryTargetMarket\": {\n    \"desiredTransformation\": \"A summary of the transformation or solution that the secondary target market wants to achieve.\",\n    \"keyElements\": [\n      {\n        \"element\": \"Description of a key element of the desired solution\",\n        \"example\": \"Direct quote or paraphrase from client feedback (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      },\n      {\n        \"element\": \"Description of another key element\",\n        \"example\": \"Supporting client verbatim (if available)\"\n      }\n    ]\n  },\n  \"overarchingTransformation\": \"A summary that captures the common transformation desired across both target markets, focusing on reducing complexity, eliminating uncertainty, and delivering a high-quality, effortless outcome.\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.2,"position":[368,832],"id":"8ea5420d-7a0f-467a-9d07-e1b23f76f669","name":"Structured Output Parser"},{"parameters":{"mode":"retrieve-as-tool","toolName":"transformationSolution","toolDescription":"=Act as a marketing analyst with deep expertise in customer behavior and transformation analysis. Your task is to scan the vector database for relevant insights from initial inputs, market research, customer feedback, testimonials, and other documents. Extract and summarize the desired transformation or solution that the target market wants to achieve by identifying both explicit statements and underlying aspirations. Use direct client quotes, inferred sentiments, and contextual clues to highlight the key elements that define this transformation for each target market segment.","pineconeIndex":{"__rl":true,"value":"=onboarding","mode":"id"},"topK":12,"options":{"pineconeNamespace":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}},"type":"@n8n/n8n-nodes-langchain.vectorStorePinecone","typeVersion":1,"position":[80,1072],"id":"7d3a62f7-b882-40df-b780-5e262d05e45e","name":"Pinecone Vector Store1","credentials":{"pineconeApi":{"id":"axuYyU6grhcC8CQp","name":"PineconeApi account"}}},{"parameters":{"model":"text-embedding-3-large","options":{"dimensions":3072}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[208,1264],"id":"e5491a8c-de74-4d3e-a8c4-e262841f78ce","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"wWUuB0CG0kTKBAtS","name":"OpenAi account | Lean Marketing"}}},{"parameters":{"content":"## AI Model \nCurrently set\nto 4.1","height":220,"width":360,"color":6},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-256,752],"id":"e58562cf-29fa-4fb9-ab29-c7ee35b3117d","name":"Sticky Note3"},{"parameters":{"content":"## Prompt Notes\n- added Pain_ Points Known And hidden\n","color":2},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[48,432],"id":"86855f33-9858-4d4a-b110-2ed701cbc7a1","name":"Sticky Note5"},{"parameters":{"content":"## Notes about run\n\nRun Time: \n\n## Analyze outputs\n- Might need higher intelligence for this output\n","height":380,"width":700,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1200,944],"id":"2937f305-1ba9-49f9-bf16-621b615de4c5","name":"Sticky Note6"},{"parameters":{"operation":"get","tableId":"target_market_profiles","filters":{"conditions":[{"keyName":"client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-1184,608],"id":"dd787b8a-e7d4-494e-ad62-45b7e1d0b14b","name":"Get Target Market","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"operation":"get","tableId":"business_profiles","filters":{"conditions":[{"keyName":"client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-880,608],"id":"4926fa83-6358-47b8-b70b-5ecd39905ac5","name":"Get Business Profile","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"content":"## Change search ID\n","height":200,"width":480},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-48,992],"id":"2d136428-c01e-44cc-9aaf-705fc85e6454","name":"Sticky Note8"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-16,832],"id":"5927079c-ce41-4ec1-82a2-e43229578c10","name":"AI","credentials":{"openAiApi":{"id":"wWUuB0CG0kTKBAtS","name":"OpenAi account | Lean Marketing"}}},{"parameters":{"operation":"get","tableId":"pain_points_extractions","filters":{"conditions":[{"keyName":"client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-592,608],"id":"c9c99ef6-cc3a-464d-961a-364e878efeb6","name":"Get Pain Points","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"workflowInputs":{"values":[{"name":"client_id"},{"name":"Overwrite"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1664,608],"id":"eea6a215-a790-429d-b2d7-529ee483684e","name":"When Executed by Another Workflow"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"0b01e0ec-c766-4b22-9f4a-9c95f327539e","leftValue":"={{ $('When Executed by Another Workflow').item.json['Overwrite'] }}","rightValue":"no","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[464,592],"id":"178a50e3-4340-4766-a315-14e212e8751d","name":"If"},{"parameters":{"operation":"update","tableId":"desired_transformations","filters":{"conditions":[{"keyName":"client_id","condition":"eq","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"company","fieldValue":"={{ $('Get Business Profile').item.json.offer }}"},{"fieldId":"primary_transformation","fieldValue":"={{ $json.output.primaryTargetMarket }}"},{"fieldId":"secondary_transformation","fieldValue":"={{ $json.output.secondaryTargetMarket }}"},{"fieldId":"overarching_transformation","fieldValue":"={{ $json.output.overarchingTransformation }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[720,672],"id":"6ad9c813-a0af-4d6a-952d-1a4d0c96e51c","name":"Supabase","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}},"onError":"continueErrorOutput"}],"connections":{"AI Agent":{"main":[[{"node":"If","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]},"Pinecone Vector Store1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Pinecone Vector Store1","type":"ai_embedding","index":0}]]},"Get Target Market":{"main":[[{"node":"Get Business Profile","type":"main","index":0}]]},"Get Business Profile":{"main":[[{"node":"Get Pain Points","type":"main","index":0}]]},"AI":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Get Pain Points":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"If":{"main":[[{"node":"Supabase1","type":"main","index":0}],[{"node":"Supabase","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Get Target Market","type":"main","index":0}]]},"Supabase1":{"main":[[],[{"node":"Supabase","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"client_id":"1650987991917x277951650850529760","Overwrite":"no"}}]},"versionId":"7db7b7a7-6a3f-4c71-9a6f-ce4fb0eea283","triggerCount":1,"shared":[{"createdAt":"2025-09-09T01:17:50.614Z","updatedAt":"2025-09-09T01:17:50.614Z","role":"workflow:owner","workflowId":"Kba4WYuZh4S2nsAU","projectId":"oeHwV8sNrbPNhUov"}],"tags":[{"createdAt":"2025-05-15T00:55:08.917Z","updatedAt":"2025-05-15T00:55:08.917Z","id":"g2UpVZ4k6adJ2S36","name":"Production"},{"createdAt":"2025-03-17T23:36:46.588Z","updatedAt":"2025-03-18T20:45:05.142Z","id":"eyDBWEktby5yXck2","name":"Understanding Pain"},{"createdAt":"2025-03-17T22:01:27.572Z","updatedAt":"2025-03-17T22:01:27.572Z","id":"8gp5kj24VYtRoQQF","name":"Awareness Matrix"}]}