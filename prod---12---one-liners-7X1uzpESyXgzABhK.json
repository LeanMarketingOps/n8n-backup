{"createdAt":"2025-08-14T23:48:20.053Z","updatedAt":"2025-10-16T05:49:07.032Z","id":"7X1uzpESyXgzABhK","name":"PROD - 12 - One Liners","active":false,"isArchived":false,"nodes":[{"parameters":{"promptType":"define","text":"=ALWAYS USE THE TOOL TO PULL CHUNKS FROM THE VECTOR DATABASE\n\nCompany Messaging:\n- Common words and phrases:\n\n{{ \n  (($('Get Common Words').item.json.primary_target_market) || [])\n    .map(p => '- ' + (p.phrase ?? String(p)))\n    .join('\\n')\n}}\n\n{{ \n  (($('Get Common Words').item.json.secondary_target_market) || [])\n    .map(p => '- ' + (p.phrase ?? String(p)))\n    .join('\\n')\n}}\n\n- Common emotional sentiment:\n  Positive themes:\n  {{ $('Get emotional sentiment').item.json.summary.positiveThemes }}\n\n  \n\n- Jargon they use (and jargon they don’t):\n{{ \n  $('Get Industry Jargon').item.json.good_jargon\n    ? $('Get Industry Jargon').item.json.good_jargon\n        .map(j => `• **${j.term}** — ${j.description}`)\n        .join('\\n')\n    : ''\n}}\n\n- Common misconceptions:\n  About solution:\n{{ JSON.stringify($('Get misconseptions').item.json.misconceptions_about_solution) }}\n\n  About Offer:\n{{ JSON.stringify($('Get misconseptions').item.json.misconceptions_about_offer) }}\n\n  About Industry:\n{{ JSON.stringify($('Get misconseptions').item.json.misconceptions_about_industry) }}\n\n  About Company:\n{{ JSON.stringify($('Get misconseptions').item.json.misconceptions_about_company) }}\n\n\n- **Primary Target Market:**\n{{ JSON.stringify($('Get Target Market').item.json.primary_target_market, null, 2) }}\n\n- **Secondary Target Market:**\n-{{ JSON.stringify($('Get Target Market').item.json.secondary_target_market, null, 2) }}\n\n","hasOutputParser":true,"options":{"systemMessage":"=**Role and Objective**\nYou are a marketing analyst. Your objective is to extract and organize all existing one-liners from the provided context, onboarding questionnaire, and client interviews, using the vector database. If no one-liners exist in a group, you must generate new ideas based on company messaging and target market insights, labeling all new ideas with “(Idea)”.\n\n**Instructions**\n\nAlways use the tool provided to extract relevant data chunks from the vector database.\n\nCarefully review all input context, onboarding questionnaires, and client interviews.\n\nExtract all one-liners verbatim and organize them under these headings:\n\nCustomer-Focused Messaging\n\nBrand Values & Craftsmanship\n\nProduct/Benefit Highlights\n\nFor each group, only include verbatim one-liners if they exist in the data.\n\nFor Customer-Focused Messaging and Product/Benefit Highlights, if no verbatim one-liners are present or if you have fewer than three, generate additional one-liners as needed based on the company’s messaging, target market, and market position.\n\nClearly label every generated idea as “(Idea)” at the end of the text.\n\nDo not include generated ideas under Brand Values & Craftsmanship.\n\nEach one-liner must be a single text string and grouped under the correct heading.\n\nMaintain a clear and consistent output structure and grouping throughout.\n\n**Reasoning Steps**\n\nBegin by reviewing all input context and extracting verbatim one-liners, grouping them according to the required headings.\n\nUse the tool to search the vector database for additional relevant phrases or taglines.\n\nIf any group lacks sufficient one-liners, generate new, original one-liners appropriate to the company’s messaging and target market, labeling each with “(Idea)”.\n\nDo not include generated ideas in Brand Values & Craftsmanship; only extract what exists in the data.\n\nEnsure all content is well-structured, clearly grouped, and easy to identify.\n\n**Context**\nYou have access to onboarding questionnaires, client interviews, all provided context, and a vector database containing messaging, testimonials, and related data. Use all available sources to ensure comprehensive extraction and informed idea generation.\n\n**Final instructions and prompt to think step by step**\nCarefully review all input context and outputs from the vector database before compiling your one-liner lists.\nThink step by step: first, extract all verbatim one-liners and group them; second, generate and label new one-liners as “(Idea)” where necessary in Customer-Focused Messaging and Product/Benefit Highlights.\nPresent your final output as a structured JSON schema object with each group clearly labeled.\nDo not yield control until you have included all extracted one-liners, and if needed, clearly labeled new ideas, grouped under their respective headings.\n\n3. **Output:**\n    - The final output must be strictly in JSON format.\n    - The JSON output must adhere exactly to the provided JSON Schema.\n    - Do not include any extra fields beyond what is defined in the JSON Schema.\n4. **Usage of the Tool:**\n    - **ALWAYS USE THE TOOL TO PULL CHUNKS FROM THE VECTOR DATABASE.**\n\n**Requirements and Guidelines:**\n\n- **Output Format:**\n    - The final output must be valid JSON and strictly conform to the provided JSON Schema.\n        {\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"OneLinerOutput\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"extractedOneLiners\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"customerFocusedMessaging\": {\n          \"type\": \"array\",\n          \"description\": \"One-liners extracted verbatim under Customer-Focused Messaging.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        },\n        \"brandValuesAndCraftsmanship\": {\n          \"type\": \"array\",\n          \"description\": \"One-liners extracted verbatim under Brand Values & Craftsmanship.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        },\n        \"productBenefitHighlights\": {\n          \"type\": \"array\",\n          \"description\": \"One-liners extracted verbatim under Product/Benefit Highlights.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        }\n      },\n      \"required\": [\n        \"customerFocusedMessaging\",\n        \"brandValuesAndCraftsmanship\",\n        \"productBenefitHighlights\"\n      ],\n      \"additionalProperties\": false\n    },\n    \"recommendedOneLiners\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"customerFocusedMessaging\": {\n          \"type\": \"array\",\n          \"description\": \"Additional recommended one-liners for Customer-Focused Messaging.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The recommended one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        },\n        \"productBenefitHighlights\": {\n          \"type\": \"array\",\n          \"description\": \"Additional recommended one-liners for Product/Benefit Highlights.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The recommended one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        }\n      },\n      \"required\": [\"customerFocusedMessaging\", \"productBenefitHighlights\"],\n      \"additionalProperties\": false\n    }\n  },\n  \"required\": [\"extractedOneLiners\", \"recommendedOneLiners\"],\n  \"additionalProperties\": false\n}\n- **Content Specifications:**\n    - Include all one-liners extracted verbatim from the inputs, grouped by their respective categories.\n    - Provide additional recommended one-liners in the specified groups.\n- **Consistency:**\n    - Maintain consistent structure, grouping, and terminology throughout the output."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[-1056,928],"id":"cc072235-420e-4673-bd2b-23b82693d52e","name":"AI Agent","onError":"continueErrorOutput"},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"OneLinerOutput\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"extractedOneLiners\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"customerFocusedMessaging\": {\n          \"type\": \"array\",\n          \"description\": \"One-liners extracted verbatim under Customer-Focused Messaging.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        },\n        \"brandValuesAndCraftsmanship\": {\n          \"type\": \"array\",\n          \"description\": \"One-liners extracted verbatim under Brand Values & Craftsmanship.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        },\n        \"productBenefitHighlights\": {\n          \"type\": \"array\",\n          \"description\": \"One-liners extracted verbatim under Product/Benefit Highlights.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        }\n      },\n      \"required\": [\n        \"customerFocusedMessaging\",\n        \"brandValuesAndCraftsmanship\",\n        \"productBenefitHighlights\"\n      ],\n      \"additionalProperties\": false\n    },\n    \"recommendedOneLiners\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"customerFocusedMessaging\": {\n          \"type\": \"array\",\n          \"description\": \"Additional recommended one-liners for Customer-Focused Messaging.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The recommended one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        },\n        \"productBenefitHighlights\": {\n          \"type\": \"array\",\n          \"description\": \"Additional recommended one-liners for Product/Benefit Highlights.\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"text\": {\n                \"type\": \"string\",\n                \"description\": \"The recommended one-liner text.\"\n              }\n            },\n            \"required\": [\"text\"],\n            \"additionalProperties\": false\n          }\n        }\n      },\n      \"required\": [\"customerFocusedMessaging\", \"productBenefitHighlights\"],\n      \"additionalProperties\": false\n    }\n  },\n  \"required\": [\"extractedOneLiners\", \"recommendedOneLiners\"],\n  \"additionalProperties\": false\n}\n"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.2,"position":[-512,1200],"id":"45780b9e-f998-4147-84fe-d1b14818ca90","name":"Structured Output Parser"},{"parameters":{"mode":"retrieve-as-tool","toolName":"transformationSolution","toolDescription":"=Extract all short, standalone statements (one-liners) that are clearly separated by line breaks or quotation marks from the client interview documents and onboarding questionnaire. Ignore long paragraphs and focus only on brief, impactful statements","pineconeIndex":{"__rl":true,"value":"=onboarding","mode":"id"},"topK":20,"options":{"pineconeNamespace":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}},"type":"@n8n/n8n-nodes-langchain.vectorStorePinecone","typeVersion":1,"position":[-912,1216],"id":"7e08f3f8-f525-4e71-a98e-3e3ba2f86a9e","name":"Pinecone Vector Store1","credentials":{"pineconeApi":{"id":"axuYyU6grhcC8CQp","name":"PineconeApi account"}}},{"parameters":{"model":"text-embedding-3-large","options":{"dimensions":3072}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[-880,1408],"id":"a92ed16d-e833-4ac4-883b-5340d318c48c","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"wWUuB0CG0kTKBAtS","name":"OpenAi account | Lean Marketing"}}},{"parameters":{"content":"## AI Model \nCurrently set\nto 4.1","height":220,"width":360,"color":6},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1376,1200],"id":"1d6c6187-5666-4d1a-b40c-f443fe58b260","name":"Sticky Note3"},{"parameters":{"operation":"get","tableId":"target_market_profiles","filters":{"conditions":[{"keyName":"client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-1328,592],"id":"95973754-7b7a-4a00-8549-11a81aaa2093","name":"Get Target Market","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-1232,1264],"id":"ae5d1bb5-a874-454a-8cc3-d789058b1e83","name":"AI","credentials":{"openAiApi":{"id":"wWUuB0CG0kTKBAtS","name":"OpenAi account | Lean Marketing"}}},{"parameters":{"operation":"get","tableId":"misconceptions_output","filters":{"conditions":[{"keyName":"client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-480,592],"id":"79733e58-9547-4a4e-9412-6213d058e2af","name":"Get misconseptions","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"operation":"get","tableId":"common_emotional_sentiment","filters":{"conditions":[{"keyName":"client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-720,592],"id":"111541f9-71d4-4453-b71b-e5a97323a041","name":"Get emotional sentiment","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"operation":"get","tableId":"industry_jargon","filters":{"conditions":[{"keyName":"=client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-960,592],"id":"bb9d155a-fdfd-4cc5-bf18-e39414dd0b41","name":"Get Industry Jargon","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"operation":"get","tableId":"common_words_and_phrases","filters":{"conditions":[{"keyName":"client_id","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-1152,592],"id":"84204311-f6df-474d-815a-06ed575a759b","name":"Get Common Words","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}}},{"parameters":{"tableId":"one_liners_output","fieldsUi":{"fieldValues":[{"fieldId":"client_id","fieldValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"},{"fieldId":"company","fieldValue":"={{ $('Get Target Market').item.json.company }}"},{"fieldId":"extracted_one_liners","fieldValue":"={{ $json.output.extractedOneLiners }}"},{"fieldId":"recommended_one_liners","fieldValue":"={{ $json.output.recommendedOneLiners }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-144,944],"id":"f8096c0d-8c81-4f3a-9664-6f2fb53a5ceb","name":"Create a row","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}},"onError":"continueErrorOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"0b01e0ec-c766-4b22-9f4a-9c95f327539e","leftValue":"={{ $('When Executed by Another Workflow').item.json['Overwrite'] }}","rightValue":"no","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-496,976],"id":"386b055d-fba9-46f3-aa70-d46e1aa72905","name":"If"},{"parameters":{"operation":"update","tableId":"one_liners_output","filters":{"conditions":[{"keyName":"client_id","condition":"eq","keyValue":"={{ $('When Executed by Another Workflow').item.json.client_id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"company","fieldValue":"={{ $('Get Target Market').item.json.company }}"},{"fieldId":"extracted_one_liners","fieldValue":"={{ $json.output.extractedOneLiners }}"},{"fieldId":"recommended_one_liners","fieldValue":"={{ $json.output.recommendedOneLiners }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-128,1136],"id":"9bbfada4-839c-47db-b846-f985ae69cdfe","name":"Update a row","credentials":{"supabaseApi":{"id":"kTiEQ3ANtMyyNLPu","name":"Supabase account"}},"onError":"continueErrorOutput"},{"parameters":{"workflowInputs":{"values":[{"name":"client_id"},{"name":"Overwrite"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1728,592],"id":"0ed00fea-7d0c-4d18-a658-5c3653b61d01","name":"When Executed by Another Workflow"}],"connections":{"AI Agent":{"main":[[{"node":"If","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]},"Pinecone Vector Store1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Pinecone Vector Store1","type":"ai_embedding","index":0}]]},"Get Target Market":{"main":[[{"node":"Get Common Words","type":"main","index":0}]]},"AI":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Get misconseptions":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Get emotional sentiment":{"main":[[{"node":"Get misconseptions","type":"main","index":0}]]},"Get Industry Jargon":{"main":[[{"node":"Get emotional sentiment","type":"main","index":0}]]},"Get Common Words":{"main":[[{"node":"Get Industry Jargon","type":"main","index":0}]]},"If":{"main":[[{"node":"Create a row","type":"main","index":0}],[{"node":"Update a row","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Get Target Market","type":"main","index":0}]]},"Create a row":{"main":[[],[{"node":"Update a row","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"client_id":"1650987991917x277951650850529760","Overwrite":"no"}}]},"versionId":"808e7623-5c7e-4dda-af53-6d9c1edf742d","triggerCount":0,"shared":[{"createdAt":"2025-08-14T23:48:20.053Z","updatedAt":"2025-08-14T23:48:20.053Z","role":"workflow:owner","workflowId":"7X1uzpESyXgzABhK","projectId":"oeHwV8sNrbPNhUov"}],"tags":[{"createdAt":"2025-03-17T22:01:27.572Z","updatedAt":"2025-03-17T22:01:27.572Z","id":"8gp5kj24VYtRoQQF","name":"Awareness Matrix"},{"createdAt":"2025-04-01T22:45:29.983Z","updatedAt":"2025-04-01T22:45:29.983Z","id":"BrjeNaIxRMVJhxj8","name":"Identity"}]}